Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность постоянных клиентов. Сделать это можно с помощью персонализированных предложений. Поэтому нужно разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.<br>

Подход к решению задачи:<br>
1.	Нужно промаркировать уровень финансовой активности постоянных покупателей. В компании принято выделять два уровня активности: «снизилась», если клиент стал покупать меньше товаров, и «прежний уровень».
2.	Нужно собрать данные по клиентам по следующим группам: 
   * Признаки, которые описывают коммуникацию сотрудников компании с клиентом.
   * Признаки, которые описывают продуктовое поведение покупателя (какие товары покупает и как часто).
   * Признаки, которые описывают покупательское поведение клиента (сколько тратил в магазине).
   * Признаки, которые описывают поведение покупателя на сайте (как много страниц просматривает и сколько времени проводит на сайте).
3.	Нужно построить модель, которая предскажет вероятность снижения покупательской активности клиента в следующие три месяца.
4.	В исследование нужно включить дополнительные данные финансового департамента о прибыльности клиента: какой доход каждый покупатель приносил компании за последние три месяца.
5.	Используя данные модели и данные о прибыльности клиентов, нужно выделить сегменты покупателей и разработать для них персонализированные предложения.<br>

**Описание данных**
Данные для работы находятся в 4-х таблицах.<br>

1. `market_file.csv` - содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.<br>
   * `id` — номер покупателя в корпоративной базе данных.
   * <font color='red'>`Покупательская активность` — рассчитанный класс покупательской активности (целевой признак): «снизилась» или «прежний уровень».</font>
   * `Тип сервиса` — уровень сервиса, например «премиум» и «стандарт». Зависит от наличия определенной подписки у пользователя.
   * `Разрешить сообщать` — информация о том, можно ли присылать покупателю дополнительные предложения о товаре. Согласие на это даёт покупатель.
   * `Маркет_актив_6_мес` — среднемесячное значение маркетинговых коммуникаций компании, которое приходилось на покупателя за последние 6 месяцев. Это значение показывает, какое число рассылок, звонков, показов рекламы и прочего приходилось на клиента.
   * `Маркет_актив_тек_мес` — количество маркетинговых коммуникаций в текущем месяце.
   * `Длительность` — значение, которое показывает, сколько дней прошло с момента регистрации покупателя на сайте.
   * `Акционные_покупки` — среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев.
   * `Популярная_категория` — самая популярная категория товаров у покупателя за последние 6 месяцев.
   * `Средний_просмотр_категорий_за_визит` — показывает, сколько в среднем категорий покупатель просмотрел за визит в течение последнего месяца.
   * `Неоплаченные_продукты_штук_квартал` — общее число неоплаченных товаров в корзине за последние 3 месяца.
   * `Ошибка_сервиса` — число сбоев, которые коснулись покупателя во время посещения сайта за последние 3 месяца.
   * `Страниц_за_визит` — среднее количество страниц, которые просмотрел покупатель за один визит на сайт за последние 3 месяца.<br>


2. `market_money.csv` - данные о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.<br>
   * `id` — номер покупателя в корпоративной базе данных.
   * `Период` — название периода, во время которого зафиксирована выручка. Например, 'текущий_месяц' или 'предыдущий_месяц'.
   * `Выручка` — сумма выручки за период в условных единицах.<br>


3. `market_time.csv` - данные о времени (в минутах), которое покупатель провёл на сайте в течение периода.<br>
   * `id — номер покупателя в корпоративной базе данных.
   * `Период` — название периода, во время которого зафиксировано общее время.
   * `минут` — значение времени, проведённого на сайте, в минутах.<br>


4. `money.csv` - данные о среднемесячной прибыли продавца за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.<br>
   * `id` — номер покупателя в корпоративной базе данных.
   * `Прибыль` — значение прибыли в условных единицах.<br>



   **Выбор лучшей модели классификации**<br>

По условиям задания нужно было выявить как можно больше покупателей, у которых есть высокая вероятность снижения покупательской активности. Таким образом, нам нужно как можно чаще предсказывать класс 1 (покупательская активность снизилась). Для этого была выбрана метрика `recall`. В качестве дополнительной использовалась метрика `roc_auc`, чтобы оценивать общую предсказывающую способность модели.

Для задачи классификации были рассмотрены возможность применения 3 моделей классификации с разными гиперпарамтерами  и способами масштабирования количественных признаков (`DecisionTreeClassifier`, `LogisticRegression` и `SVC`). Поиск лучшей модели выполнялся с помошью функции `GridSearchCV`. Самой лучшей функций получилась модель логистической регрессии, для этой модели показатели: `recall = 0.77`, а `roc_auc = 0.9022`.<br>

Лучшая метрика `roc_auc` получилась у модели опорных векторов `SVC`. Показатели для этой модели получились: `recall = 0.751`, а `roc_auc = 0.915`. При этом показатель `roc_auc` не сильно ниже.<br>

Был выбрана модель логистической регрессии в пользу более высокого показателя `recall`. В дальнейшем для этой модели можно настроить пороги классификации, чтобы еще улучшить показатель `recall`. Чтобы определить баланс между `recall` и `roc_auc`, нужно знать дполнительные затраты на маркетинговую активность.
___


**Предложения и рекомендации по повышению активности постоянных покупателей**<br>

Для сегмента покупателей, которые покупают товары из категории "Товары для детей" и имеют высокую вероятность снижения покупательской активности рекомендуется в первую очередь повысить показатель среднемесячного кол-ва маркетинговых коммуникаций. Но при этом нужно оценивать стоимость увеличения таких коммуникаций и соотносить их с прибылью.<br>

В первую очередь нужно повысить маркетинговую коммуникацию с теми клиентами, у которых есть брошенные товары, этих клиентов быстрее всего привести к покупке. Например, можно разослать промокоды на скидку.<br>

В категории "Товары для детей" обычно чаще всего покупают женщины в возрасте 25-45 лет. Поэтому для этой категории покупателей могут быть интересны и другие категории товаров, например, "Косметика и аксессуары", "Товары для красоты", "Товары для дома" или "Товары для животных". Категории нужно предлагать только те, которые не просматриваись.<br>

Также можно попробовать увеличить покупательскую активность с помощью увеличения времени на сайте или увеличения просмотра страниц. Например, рекомендация товаров при просмотре других категорий или интересующих товаров. Это может потребовать доработки сайта. Также создание каких-то конкурсов или игровых механик (при просмотре товаров), повышающих вовлеченность покупателей.<br>

В популярной категории "Товары для детей" можно расширить ассортимент товаров. Если покупатель чаще всего покупает товары в этой категории, то ему могут быть интересны и другие товары из этой категории.<br>

В качестве критериев для прогнозирования и отслеживания покупателей, у которых покупательная активность может снизиться нужно отслуживать показатели поведения на сайте: кол-во страниц за сеанс, время на сайте за сеанс, среднее кол-во просмотренных категорий за сеанс. Снижение этих показателей может сигнализировать о том, что покупателькая активность начинает снижаться.
___